{"version":3,"sources":["Components/Common/Footer.js","Components/Common/TitleToolbar.js","Components/Pages/Annotation/EditText.js","Components/Pages/Annotation/DialogCard.js","Components/Pages/Annotation/DialogTable.js","Components/Pages/Annotation/Tables.js","Components/Pages/Annotation/Creator.js","Components/Pages/Annotation/DialogToolset.js","Components/Pages/Annotation/Toolset.js","Components/Pages/AnnotationPage.js","Components/Pages/Annotation/DialogCardLearning.js","Components/Pages/DownloadPage.js","Components/Pages/UploadPage.js","Components/Pages/ErrorPage.js","Components/Page.js","index.js"],"names":["Footer","Typography","variant","color","align","Link","href","Date","getFullYear","useStyles","makeStyles","theme","toolbar","borderBottom","palette","divider","backgroundColor","TitleToolbar","props","useTheme","classes","React","useState","openHelp","setOpenHelp","Toolbar","className","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","Grid","container","direction","justifyContent","alignItems","item","xs","Button","size","onClick","style","position","left","top","transform","Avatar","src","component","noWrap","fontFamily","fontVariant","IconButton","setInfo","info","target","rel","Select","value","MenuItem","EditText","meta","selected","turns","edit","entities","split","map","entry","i","slice","indexOf","join","replaceAll","text","setText","fullWidth","TextField","autoFocus","margin","label","multiline","onChange","event","DialogActions","newMeta","data","dialogs","utterance","incoming","background","green","grey","padding","lineHeight","fontSize","borderRadius","width","bottom","border","content","height","pointerEvents","borderBottomColor","borderWidth","marginLeft","outgoing","blue","steel","DialogCard","capitalize","string","charAt","toUpperCase","addAlpha","opacity","Math","round","min","max","toString","checkPreviousTopic","i_turn","topic","previousTopic","checkFutureTopic","futureTopic","turn","speaker","topics","textAlign","Divider","cursor","editTurn","setTopic","Paper","gutterBottom","i_split","i_id","substring","phrase","phrase_split","start","end_id","end","newDelex","ent","handleRemoveEntity","display","verticalAlign","onMouseUp","entity","selection","window","getSelection","anchorOffset","focusOffset","alert","handleSetEntity","intentions","int","ButtonBase","index_remove","splice","handleRemoveIntention","intention","includes","push","handleSetIntention","tablepaper","marginTop","spacing","overflow","tableRow","DialogTable","change","index","newStatus","oldStatus","status","newCount","count","List","type","ListItem","ListItemText","primary","id","ListItemSecondaryAction","drawer","select","Fragment","fab_dialogue","a11yProps","Tables","table","setTable","Drawer","anchor","Tabs","indicatorColor","textColor","n","Tab","active","finished","deleted","Fab","randomColor","require","Creator","setOpen","luminosity","creation","setCreation","close","Box","disabled","newTopics","toolsetOpen","length","newIntentions","newEntities","handleCreate","DialogToolset","toolsetSelected","dense","button","handleSelectIntention","edge","handleSelectEntity","handleSelectTopic","fab_entity","right","fab_intention","fab_topic","Toolset","openToolset","changeToolset","Annotation","dialogUp","dialogDown","paddingTop","ButtonGroup","incomingHex","outgoingHex","DownloadPage","paddingBottom","startIcon","filename","output","intention_names","e","entity_names","ontology","Array","isArray","intents","actions","d","t","turn_meta","intent_type_ont","intent","intent_type","meta_delex","final_delex","start_id","newList","before","filter","diag","after","file","Blob","JSON","stringify","undefined","navigator","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","dropzone","maxWidth","card","continueButton","SideCard","Card","CardActionArea","CardMedia","image","flexDirection","CardContent","title","Cards","UploadPage","todo","manual","verification","range","settings","setSettings","handleTodo","name","checked","printError","error","explicit","console","log","message","handleFile","fileObjs","str","setTemp","parse","decodeURIComponent","atob","c","charCodeAt","SyntaxError","json_data","dropzoneText","onAdd","FormGroup","FormControlLabel","control","Switch","Slider","step","valueLabelFormat","valueLabelDisplay","floor","entities_id","Object","keys","intentions_id","concat","Set","sort","turnmeta","intent_name","intents_str","intention_list","replace","utterance_delex","oldDelex_split","entity_id","shift","handleConfirm","ErrorPage","lighttheme","createTheme","main","darktheme","Page","learning","dataLearning","metaLearning","forms","useMediaQuery","handleStep","nstep","sendInfo","CssBaseline","minHeight","Container","paddingRight","paddingLeft","Stepper","activeStep","alternativeLabel","Step","StepLabel","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.99952aa1.chunk.js","sourcesContent":["import Link from '@material-ui/core/Link';\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function Footer() {\r\n    return(\r\n        <footer>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n                {'Copyright © '}\r\n                <Link color=\"inherit\" href=\"https://github.com/ZeCariocaUnicamp/Assis\">\r\n                    Zé Carioca Team (Github)\r\n                </Link>{' '}\r\n                {new Date().getFullYear()}\r\n                {'.'}\r\n            </Typography>\r\n        </footer>\r\n    )\r\n}","import Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { useTheme, makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport WbSunnyIcon from '@material-ui/icons/WbSunny';\r\nimport Brightness2Icon from '@material-ui/icons/Brightness2';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    toolbar: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n        backgroundColor: 'background.default',\r\n    },\r\n}));\r\n\r\nexport default function TitleToolbar(props){\r\n    const theme = useTheme();\r\n    const classes = useStyles();\r\n    const [openHelp, setOpenHelp] = React.useState(false);\r\n    const changeTheme=()=>{\r\n        props.setInfo({...props.info, theme: props.info.theme==='light'?'dark':'light'})\r\n    }\r\n    return(\r\n        <Toolbar className={classes.toolbar}>\r\n            <Dialog open={openHelp} onClose={() => {setOpenHelp(false)}}>\r\n                <DialogTitle>{\"Sobre o IAnotador\"}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus maximus quam dapibus massa viverra, sed convallis dolor bibendum. Morbi ornare eros vel orci porttitor, sit amet molestie nisl varius. Curabitur velit dolor, egestas quis ex eu, commodo mattis eros. In tortor magna, vulputate maximus convallis sit amet, suscipit in mauris. Praesent tempor eleifend enim ut convallis. Nam vehicula est vitae turpis fringilla vestibulum a lacinia sem. Fusce varius vulputate metus, malesuada sollicitudin arcu pulvinar id. Nam eleifend ornare erat, eu lacinia nibh iaculis ac. Donec sollicitudin risus in orci lacinia accumsan. Proin vulputate dictum viverra.\r\n                        Feito com ❤️ pelo Andreis. Baseado no Design do Henrique.\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n            </Dialog>\r\n            <Grid container direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                <Grid item xs={6} container  direction=\"row\" justifyContent=\"flex-start\" alignItems=\"center\">\r\n                    <Button size=\"small\" onClick={() => {setOpenHelp(true)}}>Ajuda</Button>\r\n                </Grid>\r\n                <Grid item xs={2} container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" style={{position: 'absolute', left: '50%', top: '50%', transform: 'translate(-50%, -50%)'}}>\r\n                    <Avatar src='https://dandonota.files.wordpress.com/2008/10/machado.jpg'/>\r\n                    <Typography component=\"h2\" variant=\"h5\" color=\"inherit\" align=\"center\" noWrap style={{fontFamily: \"Bookman Old Style\", fontVariant: 'small-caps'}}>\r\n                        &nbsp;Assis\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid item xs={6} container  direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\">\r\n                    <IconButton onClick={changeTheme}>\r\n                        {props.info.theme==='light'?<Brightness2Icon />:<WbSunnyIcon />}\r\n                    </IconButton>\r\n                    <IconButton href=\"https://github.com/ZeCariocaUnicamp/Assis\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                        <GitHubIcon />\r\n                    </IconButton>\r\n                    <Select size=\"small\" value=\"pt\">\r\n                        <MenuItem value=\"pt\">PT</MenuItem>\r\n                    </Select>\r\n                </Grid>\r\n            </Grid>\r\n        </Toolbar>\r\n    )\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function EditText(props){\r\n    const [text, setText] = React.useState(getText());\r\n    const changeText = (event) => {\r\n        setText(event.target.value);\r\n    };\r\n    function getText(){\r\n        let text = props.info.meta[props.info.selected].turns[props.info.edit].entities;\r\n        return text.split(\"&&&\").map((entry,i) => i!==0?entry.slice(entry.indexOf('###')):entry).join('').replaceAll(\"###\",\"\")\r\n    }\r\n    const close = () => {\r\n        props.setInfo({...props.info, edit:-1});\r\n    };\r\n    const reload = () => {\r\n        let newMeta = props.info.meta;\r\n        newMeta[props.info.selected].turns[props.info.edit].entities = props.info.data.dialogs[props.info.selected].turns[props.info.edit].utterance;\r\n        props.setInfo({...props.info, meta: newMeta, edit:-1});\r\n    };\r\n    const save = () => {\r\n        let newMeta = props.info.meta;\r\n        newMeta[props.info.selected].turns[props.info.edit].entities=text;\r\n        props.setInfo({...props.info, meta: newMeta, edit:-1});\r\n    }\r\n    return (\r\n        <Dialog open={props.info.edit!==-1} fullWidth>\r\n        <DialogTitle>Editar Turno</DialogTitle>\r\n        <DialogContent>\r\n            <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Texto\"\r\n            multiline\r\n            value={text}\r\n            onChange={changeText}\r\n            fullWidth\r\n            />\r\n        </DialogContent>\r\n        <DialogActions>\r\n            <Button onClick={reload} color=\"primary\">\r\n                Recarregar\r\n            </Button>\r\n            <Button onClick={close} color=\"primary\">\r\n                Cancelar\r\n            </Button>\r\n            <Button onClick={save} color=\"primary\">\r\n                Salvar\r\n            </Button>\r\n        </DialogActions>\r\n        </Dialog>\r\n    );\r\n}","import ButtonBase from '@material-ui/core/ButtonBase';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport green from '@material-ui/core/colors/green';\r\nimport blue from '@material-ui/core/colors/lightBlue';\r\nimport grey from '@material-ui/core/colors/grey';\r\nimport steel from '@material-ui/core/colors/blueGrey';\r\n\r\n\r\nimport EditText from './EditText.js';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n    incoming: {\r\n        background: props=>props.info.theme==='light'?green[100]:grey[800],\r\n        padding: '18px 20px',\r\n        lineHeight: '26px',\r\n        fontSize: '16px',\r\n        borderRadius: '7px',\r\n        width: '90%',\r\n        position: 'relative',\r\n        '&::after': {\r\n            bottom: '100%',\r\n            left: '5%',\r\n            border: 'solid transparent',\r\n            content: '\" \"',\r\n            height: '0',\r\n            width: '0',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            borderBottomColor: props=>props.info.theme==='light'?green[100]:grey[800],\r\n            borderWidth: '10px',\r\n            marginLeft: '-10px',\r\n          }\r\n    },\r\n    outgoing:{\r\n        background: props=>props.info.theme==='light'?blue[100]:steel[800],\r\n        padding: '18px 18px',\r\n        lineHeight: '26px',\r\n        fontSize: '16px',\r\n        borderRadius: '7px',\r\n        width: '90%',\r\n        position: 'relative',\r\n        '&::after': {\r\n            bottom: '100%',\r\n            left: '95%',\r\n            border: 'solid transparent',\r\n            content: '\" \"',\r\n            height: '0',\r\n            width: '0',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            borderBottomColor: props=>props.info.theme==='light'?blue[100]:steel[800],\r\n            borderWidth: '10px',\r\n            marginLeft: '-10px',\r\n          }\r\n    }\r\n  });\r\n\r\nexport default function DialogCard(props){\r\n    const classes = useStyles(props);\r\n    function capitalize(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n    function addAlpha(color, opacity) {\r\n        const _opacity = Math.round(Math.min(Math.max(opacity || 1, 0), 1) * 255);\r\n        return color + _opacity.toString(16).toUpperCase();\r\n    }\r\n    \r\n    function handleSetIntention(i_turn){\r\n        if(props.info.intention >= 0 && !props.info.meta[props.info.selected].turns[i_turn].intentions.includes(props.info.intention)){\r\n            let newDialogs = props.info.data.dialogs;\r\n            const speaker = newDialogs[props.info.selected].turns[i_turn].speaker\r\n            const intent = speaker===\"agent\"? \"action\":\"intent\"\r\n            let newMeta = props.info.meta\r\n            newMeta[props.info.selected].turns[i_turn].intentions.push(props.info.intention);\r\n            newMeta[props.info.selected].int++;\r\n            props.setInfo({...props.info, meta: newMeta});\r\n        }\r\n    }\r\n    function handleRemoveIntention(int,i_turn){\r\n        let newMeta = props.info.meta\r\n        const index_remove = newMeta[props.info.selected].turns[i_turn].intentions.indexOf(int);\r\n        if (index_remove > -1) {\r\n            newMeta[props.info.selected].turns[i_turn].intentions.splice(index_remove, 1);\r\n            newMeta[props.info.selected].int--;\r\n        }\r\n        props.setInfo({...props.info, meta: newMeta});\r\n    }\r\n    function handleSetEntity(i_turn,i_split){\r\n        if(props.info.entity >= 0){\r\n            let selection = window.getSelection();\r\n            const start = selection.anchorOffset;\r\n            const end = selection.focusOffset;\r\n            let phrase = props.info.meta[props.info.selected].turns[i_turn].entities\r\n            let phrase_split = phrase.split('###')\r\n            if(i_split%2===0 && end>start && phrase.indexOf(selection.toString())!==-1){\r\n                phrase_split[i_split] = phrase_split[i_split].substring(0,start)+'###'+phrase_split[i_split].substring(start,end)+'&&&'+props.info.entity+'###'+phrase_split[i_split].substring(end)\r\n                let newMeta = props.info.meta;\r\n                newMeta[props.info.selected].ent++;\r\n                newMeta[props.info.selected].turns[i_turn].entities = phrase_split.join('###')\r\n                props.setInfo({...props.info, meta: newMeta});\r\n            }\r\n            else{\r\n                alert(\"Selecione uma área sem uma entidade!\")\r\n            }\r\n        }\r\n    }\r\n    function handleRemoveEntity(i_turn, i_split){\r\n        const phrase = props.info.meta[props.info.selected].turns[i_turn].entities\r\n        const phrase_split = phrase.split('###')\r\n        const start = phrase.indexOf(phrase_split[i_split])\r\n        const end_id = phrase.indexOf('&&&', start)\r\n        const end = phrase.indexOf('###', start)\r\n        const newDelex = phrase.substring(0,start-3)+phrase.substring(start,end_id)+phrase.substring(end+3)\r\n        let newMeta = props.info.meta;\r\n        newMeta[props.info.selected].ent--;\r\n        newMeta[props.info.selected].turns[i_turn].entities = newDelex\r\n        props.setInfo({...props.info, meta: newMeta});\r\n    }\r\n    function editTurn(i_turn){\r\n        props.setInfo({...props.info, edit: i_turn});\r\n    }\r\n    function setTopic(i_turn){\r\n        if(props.info.topic >= 0){\r\n            let newMeta = props.info.meta\r\n            newMeta[props.info.selected].turns[i_turn].topic = props.info.topic;\r\n            props.setInfo({...props.info, meta: newMeta});\r\n        }\r\n    }\r\n    function checkPreviousTopic(i_turn){\r\n        const topic = props.info.meta[props.info.selected].turns[i_turn].topic\r\n        const previousTopic = props.info.meta[props.info.selected].turns[i_turn-1] ? props.info.meta[props.info.selected].turns[i_turn-1].topic : -1\r\n        return topic !==-1 && (previousTopic !== topic)\r\n    }\r\n    function checkFutureTopic(i_turn){\r\n        const topic = props.info.meta[props.info.selected].turns[i_turn].topic\r\n        const futureTopic = props.info.meta[props.info.selected].turns[i_turn+1] ? props.info.meta[props.info.selected].turns[i_turn+1].topic : -1\r\n        return topic !==-1 && (futureTopic !== topic)\r\n    }\r\n    return(\r\n        <Grid item xs={4} container direction=\"column\" justifyContent=\"center\" alignItems=\"stretch\">\r\n            {props.info.edit!==-1?<EditText {...props}/>:null}\r\n            {props.info.data.dialogs[props.info.selected].turns.map((turn, i_turn) => (\r\n                <Grid item container direction=\"column\" justifyContent=\"flex-start\" alignItems={turn.speaker==='agent'?\"flex-start\":\"flex-end\"}>\r\n                    {checkPreviousTopic(i_turn)?\r\n                        <Grid item container style={{position: 'relative'}} xs={12}>\r\n                            <div style={{width: '100%', height: '10px', borderBottom: '1px solid '+props.info.topics[props.info.meta[props.info.selected].turns[i_turn].topic].color, textAlign: 'center'}}>\r\n                                <span style={{backgroundColor: 'white', padding: '0 1rem', color: props.info.topics[props.info.meta[props.info.selected].turns[i_turn].topic].color}}>\r\n                                    {props.info.topics[props.info.meta[props.info.selected].turns[i_turn].topic].value}\r\n                                </span>\r\n                            </div>\r\n                            <Divider/>\r\n                        </Grid>\r\n                    :\r\n                        null\r\n                    } \r\n                    <Grid item style={{padding:'0.5rem'}}>\r\n                        <b>\r\n                            {turn.speaker==='agent'?capitalize(turn.speaker):null}\r\n                            <span style={{cursor: 'pointer'}} onClick={()=>editTurn(i_turn)}> ✎ </span>\r\n                            <span style={{cursor: 'pointer'}} onClick={()=>setTopic(i_turn)}> 📌 </span>\r\n                            {turn.speaker==='client'?capitalize(turn.speaker):null}\r\n                        </b>\r\n                    </Grid>\r\n                    <Grid xs={12} item className={turn.speaker==='agent'?classes.incoming:classes.outgoing} component={Paper}>\r\n                        <Typography component=\"p\" gutterBottom>\r\n                            {props.info.meta[props.info.selected].turns[i_turn].entities.split(\"###\").map((entry, i_split) => {\r\n                                if(i_split%2){\r\n                                    const i_id = entry.indexOf('&&&')\r\n                                    const color = props.info.entities[entry.substring(i_id+3)].color\r\n                                    return <span onClick={()=>handleRemoveEntity(i_turn, i_split)} style={{border:'thin solid '+color, borderRadius: '5px', padding:'2px', cursor: 'pointer', color:color}} className='noselect'>{entry.substring(0,i_id)}\r\n                                        <span style={{fontSize: '8px', display: 'table-cell', verticalAlign: 'middle', backgroundColor: addAlpha(color,0.3), padding:'2px', borderRadius:'4px'}}>{props.info.entities[entry.substring(i_id+3)].value}</span>\r\n                                    </span>\r\n                                }else\r\n                                    return <span onMouseUp={()=>handleSetEntity(i_turn,i_split)}>{entry}</span>\r\n                            })}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        {props.info.meta[props.info.selected].turns[i_turn].intentions.map((int) => (\r\n                                <ButtonBase onClick={()=>{handleRemoveIntention(int,i_turn)}} style={{padding:'1px', border:'thin solid '+props.info.intentions[int].color, borderRadius:'5px'}}>\r\n                                    <Typography variant=\"caption\" display=\"block\" style={{fontSize:'0.6rem',color:props.info.intentions[int].color}}>\r\n                                        {props.info.intentions[int].value}\r\n                                    </Typography>\r\n                                </ButtonBase>\r\n                            ))\r\n                        }\r\n                        <ButtonBase onClick={()=>handleSetIntention(i_turn)} style={{padding:'1px 3px 1px 3px', border:'thin solid grey', borderRadius:'5px'}}>\r\n                            <Typography variant=\"caption\" display=\"block\" style={{fontSize:'0.6rem',color:'grey'}}>\r\n                                +\r\n                            </Typography>\r\n                        </ButtonBase>\r\n                    </Grid>\r\n                    {checkFutureTopic(i_turn)?\r\n                        <Grid item container style={{position: 'relative'}} xs={12}>\r\n                            <div style={{width: '100%', height: '10px', borderBottom: '1px solid '+props.info.topics[props.info.meta[props.info.selected].turns[i_turn].topic].color, textAlign: 'center'}}>\r\n                            </div>\r\n                            <Divider/>\r\n                        </Grid>\r\n                    :\r\n                        null\r\n                    }  \r\n                </Grid>\r\n            ))}\r\n        </Grid>\r\n    )\r\n}","import CheckIcon from '@material-ui/icons/Check';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport KeyboardReturnIcon from '@material-ui/icons/KeyboardReturn';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    tablepaper: {\r\n        height: 600,\r\n        width: '100%',\r\n        marginTop: theme.spacing(3),\r\n        overflow: 'auto',\r\n    },\r\n    tableRow: {\r\n        \"&.Mui-selected, &.Mui-selected:hover\": {\r\n            backgroundColor: '#e8eaf6',\r\n        }\r\n    }\r\n}));\r\n\r\nexport default function DialogTable(props){\r\n    const classes = useStyles();\r\n    function select(index){\r\n        props.setInfo({...props.info, drawer:false, selected: index});\r\n    }\r\n    function change(index,newStatus){\r\n        let newMeta = props.info.meta;\r\n        const oldStatus = newMeta[index].status\r\n        newMeta[index].status=newStatus\r\n        let newCount = props.info.count;\r\n        newCount[oldStatus]--;\r\n        newCount[newStatus]++;\r\n        props.setInfo({...props.info, meta: newMeta, count: newCount});\r\n    }\r\n    return(\r\n        <List>\r\n            {props.info.data.dialogs.map((entry, index) => {\r\n                if(props.type===props.info.meta[index].status) \r\n                    return(\r\n                        <ListItem>\r\n                            <ListItemText primary={\"ID\"+entry.id}/>\r\n                            <ListItemSecondaryAction>\r\n                                <IconButton size='small' onClick={()=>select(index)}>\r\n                                    <CreateIcon />\r\n                                </IconButton>\r\n                                {props.info.meta[index].status===\"active\"?\r\n                                    <React.Fragment>\r\n                                        <IconButton size='small' onClick={()=>change(index,\"finished\")}>\r\n                                            <CheckIcon />\r\n                                        </IconButton>\r\n                                        <IconButton size='small' onClick={()=>change(index,\"deleted\")}>\r\n                                            <DeleteOutlineIcon />\r\n                                        </IconButton>\r\n                                    </React.Fragment>\r\n                                :\r\n                                    <IconButton size='small' onClick={()=>change(index,\"active\")}>\r\n                                        <KeyboardReturnIcon />\r\n                                    </IconButton>\r\n                                }\r\n                            </ListItemSecondaryAction>\r\n                        </ListItem>\r\n                    )\r\n                else\r\n                    return null;\r\n            })}\r\n        </List>\r\n    )\r\n}","import ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport DialogTable from './DialogTable.js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fab_dialogue: {\r\n        position: 'fixed',\r\n        bottom: theme.spacing(4),\r\n        left: theme.spacing(4),\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n}));\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n      id: `simple-tab-${index}`,\r\n      'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n  }\r\n\r\nexport default function Tables(props) {\r\n    const classes = useStyles();\r\n    const [table, setTable] = React.useState(0);\r\n    const openDrawer = () => {\r\n        props.setInfo({...props.info, drawer: true});\r\n    }\r\n    const closeDrawer = () => {\r\n        props.setInfo({...props.info, drawer: false});\r\n    }\r\n    return(\r\n        <React.Fragment>\r\n            <Drawer anchor='left' open={props.info.drawer} onClose={closeDrawer}>\r\n                <Tabs value={table} indicatorColor=\"primary\" textColor=\"primary\" onChange={(event, n) => setTable(n)} aria-label=\"simple tabs example\">\r\n                    <Tab label={\"Ativos \"+props.info.count.active} {...a11yProps(0)} />\r\n                    <Tab label={\"Completos \"+props.info.count.finished} {...a11yProps(1)} />\r\n                    <Tab label={\"Deletados \"+props.info.count.deleted} {...a11yProps(2)} />\r\n                </Tabs>\r\n                {table===0?<DialogTable type=\"active\" {...props} />\r\n                :table===1?<DialogTable type=\"finished\" {...props} />\r\n                :<DialogTable type=\"deleted\" {...props} />}\r\n            </Drawer>\r\n            <Fab variant=\"extended\" onClick={openDrawer} className={classes.fab_dialogue}>\r\n                <ChatBubbleOutlineIcon className={classes.margin}/>\r\n                Dialogos {props.info.count.finished}/{props.info.count.active+props.info.count.finished}\r\n            </Fab>\r\n        </React.Fragment>\r\n    )\r\n}","import AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport Button from '@material-ui/core/Button';\r\nimport Box from '@material-ui/core/Box';\r\nimport CasinoIcon from '@material-ui/icons/Casino';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nvar randomColor = require('randomcolor');\r\n\r\nexport default function Creator(props) {\r\n    const [open, setOpen] = React.useState(false);\r\n    const [creation, setCreation] = React.useState({color: randomColor({luminosity: 'dark'}), value: ''})\r\n    function handleCreate(){\r\n        if(props.entity && !props.intention && !props.topic){\r\n            let newEntities = props.info.entities;\r\n            newEntities.push(creation);\r\n            props.setInfo({...props.info, toolsetOpen: false, entities: newEntities, entity: newEntities.length-1});\r\n        }\r\n        else if(props.intention  && !props.entity && !props.topic){\r\n            let newIntentions = props.info.intentions;\r\n            newIntentions.push(creation);\r\n            props.setInfo({...props.info, toolsetOpen: false, intentions: newIntentions, intention: newIntentions.length-1});\r\n        }\r\n        else if(props.topic  && !props.entity && !props.intention){\r\n            let newTopics = props.info.topics;\r\n            newTopics.push(creation);\r\n            props.setInfo({...props.info, toolsetOpen: false, topics: newTopics, topic: newTopics.length-1});\r\n        \r\n        }\r\n    }\r\n    function close(){\r\n        setCreation({color: randomColor(),value:''});\r\n        setOpen(false);\r\n    }\r\n    return(\r\n        <>\r\n            <IconButton size='small' onClick={() => {setOpen(true)}}  style={{borderRadius:'0'}}>\r\n                <AddCircleOutlineIcon />\r\n            </IconButton>\r\n            <Dialog\r\n                open={open}\r\n                onClose={() => close()}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                <DialogTitle id=\"alert-dialog-title\">{\"Criar \" + (props.entity? \"Entidade\" : props.intention? \"Intenção\" : \"Domínio\")}</DialogTitle>\r\n                <DialogContent>\r\n                    <Grid container direction=\"row\" justifyContent=\"flex-start\" alignItems=\"center\" spacing={1}>\r\n                            <Grid item>\r\n                                <Box style={{width:'1.5rem',height:'1.5rem', backgroundColor: creation.color, border: 'thin solid grey', borderRadius: '0.3rem'}}/>\r\n                            </Grid>\r\n                        <Grid item>\r\n                            <IconButton onClick={() => setCreation({...creation, color: randomColor()})}>\r\n                                <CasinoIcon />\r\n                            </IconButton>\r\n                        </Grid>\r\n                    </Grid>\r\n                        <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"intention\"\r\n                        label={props.entity? \"Nome da Entidade\" : props.intention? \"Nome da Intenção\" : \"Nome do Domínio\"}\r\n                        fullWidth\r\n                        onChange={event => setCreation({...creation, value: event.target.value})}\r\n                        />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => close()} color=\"primary\">\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button disabled={!creation.value} onClick={() => {handleCreate();close()}} color=\"primary\">\r\n                        Criar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\n\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport Creator from './Creator.js';\r\n\r\nexport default function DialogToolset(props) {\r\n    function handleSelectEntity(index){\r\n        props.setInfo({...props.info, toolsetOpen: false, entity: index});\r\n    }\r\n    function handleSelectIntention(index){\r\n        props.setInfo({...props.info, toolsetOpen: false, intention: index});\r\n    }\r\n    function handleSelectTopic(index){\r\n        props.setInfo({...props.info, toolsetOpen: false, topic: index});\r\n\r\n    }\r\n    return(\r\n        <React.Fragment>\r\n                {props.info.toolsetSelected===1?\r\n                    <React.Fragment>\r\n                    <Creator intention {...props}/>\r\n                    <List dense='True'>\r\n                        {props.info.intentions.map((entry, index) => (\r\n                            <ListItem button onClick={()=>handleSelectIntention(index)} style={{color: entry.color}}>\r\n                                <ListItemText primary={'- ' + entry.value}/>\r\n                                <ListItemSecondaryAction>\r\n                                <IconButton onClick={()=>alert(\"edit(intention)\")} edge=\"end\" aria-label=\"delete\">\r\n                                    <CreateIcon />\r\n                                </IconButton>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            \r\n                        ))}\r\n                    </List>\r\n                    </React.Fragment>\r\n                :props.info.toolsetSelected===0?\r\n                    <React.Fragment>\r\n                        <Creator entity {...props}/>\r\n                        <List dense='True'>\r\n                            {props.info.entities.map((entry, index) => (\r\n                                <ListItem button onClick={()=>handleSelectEntity(index)} style={{color: entry.color}}>\r\n                                    <ListItemText primary={'- ' + entry.value}/>\r\n                                    <ListItemSecondaryAction>\r\n                                    <IconButton onClick={()=>alert(\"edit(entity)\")} edge=\"end\" aria-label=\"delete\">\r\n                                        <CreateIcon />\r\n                                    </IconButton>\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                            ))}\r\n                        </List>\r\n                    </React.Fragment>\r\n                :\r\n                    <React.Fragment>\r\n                        <Creator topic {...props}/>\r\n                        <List dense='True'>\r\n                            {props.info.topics.map((entry, index) => (\r\n                                <ListItem button onClick={()=>handleSelectTopic(index)} style={{color: entry.color}}>\r\n                                    <ListItemText primary={'- ' + entry.value}/>\r\n                                    <ListItemSecondaryAction>\r\n                                    <IconButton onClick={()=>alert(\"edit(topic)\")} edge=\"end\" aria-label=\"delete\">\r\n                                        <CreateIcon />\r\n                                    </IconButton>\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                            ))}\r\n                        </List>\r\n                    </React.Fragment>\r\n                }\r\n        </React.Fragment>\r\n    )\r\n}","import ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\nimport PermIdentityIcon from '@material-ui/icons/PermIdentity';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\n\r\nimport DialogToolset from './DialogToolset.js';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    fab_entity: {\r\n        position: 'fixed',\r\n        bottom: theme.spacing(4),\r\n        right: theme.spacing(4),\r\n      },\r\n      fab_intention: {\r\n          position: 'fixed',\r\n          bottom: theme.spacing(12),\r\n          right: theme.spacing(4),\r\n      },\r\n      fab_topic: {\r\n        position: 'fixed',\r\n        bottom: theme.spacing(20),\r\n        right: theme.spacing(4),\r\n    },\r\n}));\r\n\r\nfunction a11yProps(index) {\r\n    return {\r\n      id: `simple-tab-${index}`,\r\n      'aria-controls': `simple-tabpanel-${index}`,\r\n    };\r\n  }\r\n\r\nexport default function Toolset(props) {\r\n    const classes = useStyles();\r\n    const closeToolset = () => {\r\n        props.setInfo({...props.info, toolsetOpen: false})\r\n    }\r\n    function openToolset(i){\r\n        props.setInfo({...props.info, toolsetOpen: true, toolsetSelected: i})\r\n    }\r\n    function changeToolset(i){\r\n        props.setInfo({...props.info, toolsetSelected: i})\r\n    }\r\n    return(\r\n        <React.Fragment>\r\n            <Drawer anchor='right' open={props.info.toolsetOpen} onClose={closeToolset}>\r\n                <Tabs value={props.info.toolsetSelected} indicatorColor=\"primary\" textColor=\"primary\" onChange={(event, i) => changeToolset(i)} aria-label=\"simple tabs example\">\r\n                    <Tab label=\"Entidades\" {...a11yProps(0)} />\r\n                    <Tab label=\"Intenções\" {...a11yProps(1)} />\r\n                    <Tab label=\"Domínios\" {...a11yProps(2)} />\r\n                </Tabs>\r\n                {props.info.toolsetSelected?\r\n                    <DialogToolset type=\"intention\" {...props} />\r\n                :\r\n                    <DialogToolset type=\"entity\" {...props} />\r\n                }\r\n            </Drawer>\r\n            <Fab variant=\"extended\" style={props.info.intention!==-1?{color:props.info.intentions[props.info.intention].color}:null} onClick={() => openToolset(1)} className={classes.fab_intention}>\r\n                <ErrorOutlineIcon className={classes.margin}/>\r\n                {props.info.intention!==-1?\r\n                    props.info.intentions[props.info.intention].value\r\n                :    \r\n                    'Intenções'\r\n                }\r\n            </Fab>\r\n            <Fab variant=\"extended\" style={props.info.entity!==-1?{color:props.info.entities[props.info.entity].color}:null} onClick={() => openToolset(0)} className={classes.fab_entity}>\r\n                <PermIdentityIcon className={classes.margin}/>\r\n                {props.info.entity!==-1?\r\n                    props.info.entities[props.info.entity].value\r\n                :    \r\n                    'Entidades'\r\n                }\r\n            </Fab>\r\n            <Fab variant=\"extended\" style={props.info.topic!==-1?{color:props.info.topics[props.info.topic].color}:null} onClick={() => openToolset(2)} className={classes.fab_topic}>\r\n                <ChatBubbleOutlineIcon className={classes.margin}/>\r\n                {props.info.topic!==-1?\r\n                    props.info.topics[props.info.topic].value\r\n                :    \r\n                    'Domínios'\r\n                }\r\n            </Fab>\r\n        </React.Fragment>\r\n    )\r\n}","import Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport React from 'react';\r\n\r\nimport DialogCard from './Annotation/DialogCard.js';\r\nimport Tables from './Annotation/Tables.js';\r\nimport Toolset from './Annotation/Toolset.js';\r\n\r\nexport default function Annotation(props) {\r\n    const openDrawer = () => {\r\n        props.setInfo({...props.info, drawer: true});\r\n    }\r\n    const dialogUp = () => {\r\n        props.setInfo({...props.info, selected: props.info.selected+1});\r\n    }\r\n    const dialogDown = () => {\r\n        props.setInfo({...props.info, selected: props.info.selected-1});\r\n    }\r\n    return(\r\n        <Grid item container xs={12} direction=\"column\" justifyContent=\"center\" alignItems=\"center\" spacing={1} style={{paddingTop:'1rem'}}>       \r\n            <Tables {...props}/>\r\n            <Toolset {...props}/>\r\n                {props.info.selected!==-1?\r\n                    <Grid item>\r\n                        <ButtonGroup color=\"primary\" aria-label=\"outlined primary button group\">\r\n                            <Button disabled={props.info.selected===0} onClick={dialogDown}>{'<'}</Button>\r\n                            <Button disabled>Dialogo Nº{props.info.data.dialogs[props.info.selected].id}</Button>\r\n                            <Button disabled={props.info.selected===props.info.data.dialogs.length-1} onClick={dialogUp}>{'>'}</Button>\r\n                        </ButtonGroup>\r\n                    </Grid>\r\n                :\r\n                    <Grid item>\r\n                        <Button variant=\"outlined\" onClick={openDrawer}>\r\n                            Selecione um Dialogo\r\n                        </Button>\r\n                    </Grid>\r\n                }\r\n            {props.info.selected!==-1?\r\n                <DialogCard {...props}/>\r\n            :\r\n                null\r\n            }\r\n            {props.info.selected!==-1?\r\n                <Grid item>\r\n                    <ButtonGroup color=\"primary\" aria-label=\"outlined primary button group\">\r\n                        <Button disabled={props.info.selected===0} onClick={dialogDown}>{'<'}</Button>\r\n                        <Button disabled>Dialogo Nº{props.info.data.dialogs[props.info.selected].id}</Button>\r\n                        <Button disabled={props.info.selected===props.info.data.dialogs.length-1} onClick={dialogUp}>{'>'}</Button>\r\n                    </ButtonGroup>\r\n                </Grid>\r\n                :\r\n                null\r\n            }\r\n        </Grid>\r\n    )\r\n}","import ButtonBase from '@material-ui/core/ButtonBase';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport EditText from './EditText.js';\r\n\r\nconst incomingHex = '#E8E8E8'; // '#b5d9a7'\r\nconst outgoingHex = '#C8C8C8'; // '#b9d5f0'\r\n\r\nconst useStyles = makeStyles({\r\n    incoming: {\r\n        background: incomingHex,\r\n        padding: '18px 20px',\r\n        lineHeight: '26px',\r\n        fontSize: '16px',\r\n        borderRadius: '7px',\r\n        width: '90%',\r\n        position: 'relative',\r\n        '&::after': {\r\n            bottom: '100%',\r\n            left: '5%',\r\n            border: 'solid transparent',\r\n            content: '\" \"',\r\n            height: '0',\r\n            width: '0',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            borderBottomColor: incomingHex,\r\n            borderWidth: '10px',\r\n            marginLeft: '-10px',\r\n          }\r\n    },\r\n    outgoing:{\r\n        background: outgoingHex,\r\n        padding: '18px 18px',\r\n        lineHeight: '26px',\r\n        fontSize: '16px',\r\n        borderRadius: '7px',\r\n        width: '90%',\r\n        position: 'relative',\r\n        '&::after': {\r\n            bottom: '100%',\r\n            left: '95%',\r\n            border: 'solid transparent',\r\n            content: '\" \"',\r\n            height: '0',\r\n            width: '0',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            borderBottomColor: outgoingHex,\r\n            borderWidth: '10px',\r\n            marginLeft: '-10px',\r\n          }\r\n    }\r\n  });\r\n\r\nexport default function DialogCard(props){\r\n    const classes = useStyles();\r\n    function capitalize(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n    function addAlpha(color, opacity) {\r\n        const _opacity = Math.round(Math.min(Math.max(opacity || 1, 0), 1) * 255);\r\n        return color + _opacity.toString(16).toUpperCase();\r\n    }\r\n    \r\n    function handleSetIntention(i_turn){\r\n        return false\r\n    }\r\n    function handleRemoveIntention(int,i_turn){\r\n        return false\r\n    }\r\n    function handleSetEntity(i_turn,i_split){\r\n        return false\r\n    }\r\n    function handleRemoveEntity(i_turn, i_split){\r\n        return false\r\n    }\r\n    function editTurn(i_turn){\r\n        return false\r\n    }\r\n    function setTopic(i_turn){\r\n        return false   \r\n    }\r\n    function checkPreviousTopic(i_turn){\r\n        return false\r\n    }\r\n    function checkFutureTopic(i_turn){\r\n        return false\r\n    }\r\n    return(\r\n        <Grid item xs={4} container direction=\"column\" justifyContent=\"center\" alignItems=\"stretch\">\r\n            {props.info.edit!==-1?<EditText {...props}/>:null}\r\n            {props.info.dataLearning.dialogs[props.info.learning].turns.map((turn, i_turn) => (\r\n                <Grid item container direction=\"column\" justifyContent=\"flex-start\" alignItems={turn.speaker==='agent'?\"flex-start\":\"flex-end\"}>\r\n                    {checkPreviousTopic(i_turn)?\r\n                        <Grid item container style={{position: 'relative'}} xs={12}>\r\n                            <div style={{width: '100%', height: '10px', borderBottom: '1px solid '+props.info.topics[props.info.metaLearning[props.info.learning].turns[i_turn].topic].color, textAlign: 'center'}}>\r\n                                <span style={{backgroundColor: 'white', padding: '0 1rem', color: props.info.topics[props.info.metaLearning[props.info.learning].turns[i_turn].topic].color}}>\r\n                                    {props.info.topics[props.info.metaLearning[props.info.learning].turns[i_turn].topic].value}\r\n                                </span>\r\n                            </div>\r\n                            <Divider/>\r\n                        </Grid>\r\n                    :\r\n                        null\r\n                    } \r\n                    <Grid item style={{padding:'0.5rem'}}>\r\n                        <b>\r\n                            {turn.speaker==='agent'?capitalize(turn.speaker):null}\r\n                            <span style={{cursor: 'pointer'}} onClick={()=>editTurn(i_turn)}> ✎ </span>\r\n                            <span style={{cursor: 'pointer'}} onClick={()=>setTopic(i_turn)}> 📌 </span>\r\n                            {turn.speaker==='client'?capitalize(turn.speaker):null}\r\n                        </b>\r\n                    </Grid>\r\n                    <Grid xs={12} item className={turn.speaker==='agent'?classes.incoming:classes.outgoing} component={Paper}>\r\n                        <Typography component=\"p\" gutterBottom>\r\n                            {props.info.metaLearning[props.info.learning].turns[i_turn].entities.split(\"###\").map((entry, i_split) => {\r\n                                if(i_split%2){\r\n                                    const i_id = entry.indexOf('&&&')\r\n                                    const color = props.info.entities[entry.substring(i_id+3)].color\r\n                                    return <span onClick={()=>handleRemoveEntity(i_turn, i_split)} style={{border:'thin solid '+color, borderRadius: '5px', padding:'2px', cursor: 'pointer', color:color}} className='noselect'>{entry.substring(0,i_id)}\r\n                                        <span style={{fontSize: '8px', display: 'table-cell', verticalAlign: 'middle', backgroundColor: addAlpha(color,0.3), padding:'2px', borderRadius:'4px'}}>{props.info.entities[entry.substring(i_id+3)].value}</span>\r\n                                    </span>\r\n                                }else\r\n                                    return <span onMouseUp={()=>handleSetEntity(i_turn,i_split)}>{entry}</span>\r\n                            })}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        {props.info.metaLearning[props.info.learning].turns[i_turn].intentions.map((int) => (\r\n                                <ButtonBase onClick={()=>{handleRemoveIntention(int,i_turn)}} style={{padding:'1px', border:'thin solid '+props.info.intentions[int].color, borderRadius:'5px'}}>\r\n                                    <Typography variant=\"caption\" display=\"block\" style={{fontSize:'0.6rem',color:props.info.intentions[int].color}}>\r\n                                        {props.info.intentions[int].value}\r\n                                    </Typography>\r\n                                </ButtonBase>\r\n                            ))\r\n                        }\r\n                        <ButtonBase onClick={()=>handleSetIntention(i_turn)} style={{padding:'1px 3px 1px 3px', border:'thin solid grey', borderRadius:'5px'}}>\r\n                            <Typography variant=\"caption\" display=\"block\" style={{fontSize:'0.6rem',color:'grey'}}>\r\n                                +\r\n                            </Typography>\r\n                        </ButtonBase>\r\n                    </Grid>\r\n                    {checkFutureTopic(i_turn)?\r\n                        <Grid item container style={{position: 'relative'}} xs={12}>\r\n                            <div style={{width: '100%', height: '10px', borderBottom: '1px solid '+props.info.topics[props.info.metaLearning[props.info.learning].turns[i_turn].topic].color, textAlign: 'center'}}>\r\n                            </div>\r\n                            <Divider/>\r\n                        </Grid>\r\n                    :\r\n                        null\r\n                    }  \r\n                </Grid>\r\n            ))}\r\n        </Grid>\r\n    )\r\n}","import Button from '@material-ui/core/Button';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function DownloadPage(props) {\r\n    // Terminar na V0:\r\n    // - entidades no arquivo de saida\r\n    // - tirar dialogos marcadas como deletados\r\n    // V0.1:\r\n    // - Passar a tabela para o drawer lateral\r\n    // - Nova barra de ferramentas\r\n    // - Deletar intenções e entidades (usar o marcador)\r\n    function download() {\r\n        const filename = props.info.filename.substring(0,props.info.filename.length-5)+'_anotado.json';\r\n        let meta = props.info.meta;\r\n        let output = props.info.data;\r\n        let intention_names = props.info.intentions.map((e) => (e.value))\r\n        let entity_names = props.info.entities.map((e) => (e.value))\r\n        output.ontology[\"slot-values\"] = {}\r\n        if(!Array.isArray(output.ontology.intents)){\r\n            output.ontology.intents = []\r\n        }\r\n        if(!Array.isArray(output.ontology.actions)){\r\n            output.ontology.actions = []\r\n        }\r\n        // console.log(props.info)\r\n        for(let d=0;d<output.dialogs.length;d++){\r\n            for(let t=0;t<output.dialogs[d].turns.length;t++){\r\n                let turn = output.dialogs[d].turns[t]\r\n                let turn_meta = meta[d].turns[t]\r\n                // Intenções\r\n                let intent_type_ont = turn.intent?'intents':'actions'\r\n                let intent_type = turn[\"turn-num\"]%2?'action':'intent'\r\n                turn[intent_type] = ''\r\n                for(let i=0;i<turn_meta.intentions.length;i++){\r\n                    let intention = intention_names[turn_meta.intentions[i]]\r\n                    if(!output.ontology[intent_type_ont]){\r\n                        output.ontology[intent_type_ont] = [intention]\r\n                    }\r\n                    else if(!output.ontology[intent_type_ont].includes(intention)){\r\n                        output.ontology[intent_type_ont].push(intention)\r\n                    }\r\n                    turn[intent_type] = turn[intent_type] +'['+intention+']'\r\n                }\r\n                // Entidades\r\n                let meta_delex = meta[d].turns[t].entities.split('###')\r\n                let final_delex = ''\r\n                turn['slot-values'] = {}\r\n                for(let i=0;i<meta_delex.length;i++){\r\n                    let start_id = meta_delex[i].indexOf('&&&')\r\n                    if(start_id===-1){\r\n                        final_delex = final_delex + meta_delex[i]\r\n                    }\r\n                    else{\r\n                        let entity = entity_names[meta_delex[i].substring(start_id+3)]\r\n                        let value = meta_delex[i].substring(0,start_id)\r\n                        final_delex = final_delex + '['+entity+']'\r\n                        // Adicionando na ontologia\r\n                        if(!output.ontology['slot-values'][entity]){\r\n                            output.ontology['slot-values'][entity] = [value]\r\n                        }\r\n                        else if(!output.ontology['slot-values'][entity].includes(value)){\r\n                            output.ontology['slot-values'][entity].push(value)\r\n                        }\r\n                        // Adicionando no slot-values\r\n                        if(!(entity in turn['slot-values'])){\r\n                            turn['slot-values'][entity]=value;\r\n                        }\r\n                        else{\r\n                            if(Array.isArray(turn['slot-values'][entity])){\r\n                                if(!turn['slot-values'][entity].includes(value)){\r\n                                    turn['slot-values'][entity].push(value);\r\n                                }\r\n                            }\r\n                            // Se não for uma lista, preciso ou verificar se não é o mesmo valor, ou criar uma lista\r\n                            else{\r\n                                if(!(value===turn['slot-values'][entity])){\r\n                                    let newList = [turn['slot-values'][entity],value];\r\n                                    turn['slot-values'][entity] = newList;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                turn[\"utterance_delex\"] = final_delex;\r\n            }\r\n        }\r\n        // Deletes dialogues 92968\r\n        var before = output[\"dialogs\"].length;\r\n        output[\"dialogs\"] = output[\"dialogs\"].filter((diag, i)=>{\r\n            return meta[i].status !== \"deleted\";\r\n        });\r\n        meta = meta.filter((diag, i)=>{\r\n            return diag.status !== \"deleted\";\r\n        });\r\n        var after = output[\"dialogs\"].length\r\n        alert(\"Check: \"+(before-after)+\" dialogs deleted\")\r\n        var file = new Blob([JSON.stringify(output,undefined,2)], {type: \"application/json\"});\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, filename);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"), url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function() {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);\r\n            }, 0);\r\n        }\r\n    }\r\n    return(\r\n        <Grid item container direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Typography style={{paddingTop:'13rem',paddingBottom:'2rem'}}>\r\n                Parabéns, seu dataset está anotado!\r\n            </Typography>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                startIcon={<GetAppIcon />}\r\n                onClick={() => download()}\r\n                >\r\n                Download\r\n            </Button>\r\n        </Grid>\r\n    )\r\n}\r\n","import Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport {DropzoneAreaBase} from 'material-ui-dropzone';\r\nimport randomColor from 'randomcolor';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dropzone: {\r\n        paddingTop: '1rem',\r\n        margin: 'auto',\r\n        maxWidth: '50rem',\r\n        textAlign: 'center'\r\n    },\r\n    card: {\r\n        textAlign: 'left'   \r\n    },\r\n    continueButton: {\r\n        marginTop: '1rem',\r\n    },\r\n}));\r\n\r\nfunction SideCard(props){\r\n    return(\r\n      <Grid item xs={6}>\r\n        <Card xs={6}>\r\n          <CardActionArea href={\"https://unicamp-cit.notion.site/unicamp-cit/CI-T-Unicamp-ca7a3fc10d9a43f09a14c5dd4d31e554\"}>\r\n            <div style={{display: 'flex'}}>\r\n              <CardMedia style={{width: 100}} image={props.image}/>\r\n              <div style={{display: 'flex', flexDirection: 'column'}}>\r\n                <CardContent>\r\n                  <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                    {props.title}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    {props.text}\r\n                  </Typography>\r\n                </CardContent>\r\n              </div>\r\n            </div>\r\n          </CardActionArea>\r\n        </Card>\r\n      </Grid>\r\n    )\r\n  }\r\n  \r\n  function Cards(){\r\n      return(\r\n        <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={2} style={{paddingBottom: '2rem', textAlign: 'left'}}>   \r\n          <SideCard title=\"Tutorial\" text=\"Aprenda a usar a ferramenta\" image=\"https://www.pythontutorial.net/wp-content/uploads/2020/11/tkinter-tutorial.png\"/>\r\n          <SideCard title=\"Metodologia\" text=\"Como decidir entidades e intenções?\" image=\"https://www.mahdimamouri.com/media/consulting/nlp.png\"/>\r\n          <SideCard title=\"Documentação\" text=\"Como alterar a API e funções\" image=\"https://code.visualstudio.com/assets/docs/languages/javascript/overview.png\"/>\r\n          <SideCard title=\"Equipe\" text=\"Conheça nossa equipe de pesquisa!\" image=\"https://ic.unicamp.br/~jreis/media/image1.png\"/>\r\n        </Grid>\r\n      )\r\n  }\r\n\r\nexport default function UploadPage(props) {\r\n    const classes = useStyles();\r\n    const [settings, setSettings] = React.useState({\r\n        todo: {\r\n            manual: true,\r\n            verification: false,\r\n            download: false,\r\n        },\r\n        filename: '',\r\n        data: {dialogs: []},\r\n        open: false,\r\n        range: [0,100],\r\n    });\r\n    function handleTodo(event){\r\n        setSettings({...settings, todo: {...settings.todo, [event.target.name]: event.target.checked}});\r\n    }\r\n    const handleRange = (event,range) => {\r\n        setSettings({...settings, range: range});\r\n    }\r\n    function b64DecodeUnicode(str) {\r\n        return decodeURIComponent(atob(str).split('').map(function(c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n    }\r\n    var printError = function(error, explicit) {\r\n        console.log(`[${explicit ? 'EXPLICIT' : 'INEXPLICIT'}] ${error.name}: ${error.message}`);\r\n    }\r\n    function handleFile(fileObjs){\r\n        const filename = fileObjs[0].file.name\r\n        console.log(filename +'-'+fileObjs[0].file)\r\n        try {\r\n            let result = JSON.parse(b64DecodeUnicode(fileObjs[0].data.substring(29)));\r\n            setTemp(filename,result);\r\n        } catch (e) {\r\n            alert(\"Seu .json está com problemas, verifique se ele não há caracteres faltando ou errados\\n(veja o erro no console.log)\");\r\n            if (e instanceof SyntaxError) {\r\n                printError(e, true);\r\n            } else {\r\n                printError(e, false);\r\n            }\r\n        }\r\n    } \r\n    function seeExample(){\r\n        const example = require('../../ExampleData/creditos_placa_errada_8.json');\r\n        setTemp('creditos_placa_errada_8.json',example)\r\n    }\r\n    function setTemp(filename,json_data){\r\n        setSettings({...settings, filename: filename, data:json_data, range: [0,json_data.dialogs.length-1], open: true});\r\n    }\r\n    function handleConfirm(){\r\n        let json_data = settings.data\r\n        // TODO depois corrige isso aqui pra nao descartar dialogos\r\n        // json_data.dialogs = json_data.dialogs.slice(settings.range[0],settings.range[1]);\r\n        let meta = []\r\n        let count = {active: json_data.dialogs.length, finished: 0, deleted: 0}\r\n        let entities_id = Object.keys(json_data.ontology['slot-values']);\r\n        let entities = entities_id.map((value) => ({color: randomColor({luminosity: 'dark'}), value: value}))\r\n        let intentions_id = json_data.ontology.intents.concat(json_data.ontology.actions);\r\n        intentions_id = [...new Set(intentions_id)].sort();\r\n        let intentions = intentions_id.map((value) => ({color: randomColor({luminosity: 'dark'}), value: value}))\r\n        console.log(json_data.dialogs.length);\r\n        for(let d=0;d<json_data.dialogs.length;d++){\r\n            let turnmeta = []\r\n            let int = 0;\r\n            let ent = 0;\r\n            for(let t=0;t<json_data.dialogs[d].turns.length;t++){\r\n                let turn = json_data.dialogs[d].turns[t]\r\n                // Parte das intenções\r\n                let intent_name = turn.speaker===\"client\"?\"intent\":\"action\";\r\n                let intents_str = turn[intent_name]\r\n                let intention_list = []\r\n                if(intents_str&&intents_str!==\"\"){\r\n                    let intents = turn[intent_name].replace(\"]\",\"\").split(\"[\");\r\n                    // Criar intenção que não está na lista\r\n                    for(let i=0;i<intents.length;i++){\r\n                        let intent = intents[i].replace(\"]\",\"\")\r\n                        if(intent!==''){\r\n                            if(!intentions_id.includes(intent)){\r\n                                intentions_id.push(intent)\r\n                                intentions.push({color: randomColor({luminosity: 'dark'}), value: intent})\r\n                            }\r\n                            intention_list.push(intentions_id.indexOf(intent));\r\n                            int++;\r\n                        }\r\n                    }\r\n                }\r\n                // Parte das entidades\r\n                let newDelex = '';\r\n                if(turn.utterance_delex){\r\n                    let oldDelex = turn.utterance_delex;\r\n                    let oldDelex_split = oldDelex.split('[')\r\n                    for(let i=0;i<oldDelex_split.length;i++){\r\n                        let end = oldDelex_split[i].indexOf(']')\r\n                        if(end!==-1){\r\n                            let entity = oldDelex_split[i].substring(0,end);\r\n                            let value = turn[\"slot-values\"][entity]\r\n                            if(!entities_id.includes(entity)){\r\n                                entities_id.push(entity)\r\n                                entities.push({color: randomColor({luminosity: 'dark'}), value: entity})\r\n                            }\r\n                            let entity_id = entities_id.indexOf(entity)\r\n                            if(Array.isArray(value)){\r\n                                newDelex = newDelex + '###'+value.shift()+'&&&'+entity_id+'###'+oldDelex_split[i].substring(end+1)\r\n                            }\r\n                            else{\r\n                                newDelex = newDelex + '###'+value+'&&&'+entity_id+'###'+oldDelex_split[i].substring(end+1)\r\n                            }\r\n                            ent++;\r\n                        }\r\n                        else{\r\n                            newDelex = newDelex + oldDelex_split[i]\r\n                        }\r\n                    }\r\n                }\r\n                turnmeta.push({\r\n                    intentions: intention_list,\r\n                    topic: -1,\r\n                    entities: newDelex?newDelex:json_data.dialogs[d].turns[t].utterance\r\n                })\r\n            }\r\n            meta.push({int: int, ent: ent, status:\"active\", turns: turnmeta})\r\n        }\r\n        props.setInfo({...props.info, entities: entities, intentions: intentions, filename: settings.filename, data: json_data, meta: meta, count: count, step: 0});\r\n        setSettings({\r\n            todo: {\r\n                manual: true,\r\n                verification: false,\r\n                download: false,\r\n            },\r\n            data: {dialogs: []},\r\n            open: false,\r\n            dialogs: 0,\r\n        })\r\n    }\r\n\r\n\r\n    return(\r\n        <main className={classes.dropzone}>\r\n            <Grid container direction=\"row\" justifyContent=\"center\" alignItems=\"center\" spacing={2} style={{paddingBottom: '2rem'}}>\r\n                <Cards />\r\n            </Grid>\r\n            <DropzoneAreaBase\r\n                dropzoneText=\"Adicione as conversas do seu Chatbot\"\r\n                onAdd={(fileObjs) => {handleFile(fileObjs)}}\r\n                />\r\n            <Button variant=\"contained\" color=\"primary\" className={classes.continueButton} onClick={() => seeExample()}>\r\n                Veja os dados de Exemplo\r\n            </Button>\r\n            <Dialog\r\n                open={settings.open}\r\n                onClose={() => setSettings({...settings, data: {dialogs: []}, open: false})}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n                maxWidth='sm'\r\n                fullWidth={true}\r\n                >\r\n                <DialogContent>\r\n                    <Typography variant='h5'>\r\n                        {\"Arquivo \" + settings.filename}\r\n                    </Typography>\r\n                    <Grid container direction=\"column\" justifyContent=\"flex-start\" alignItems=\"center\">\r\n                        <Typography variant=\"h6\">\r\n                            O que você deseja fazer?\r\n                        </Typography>\r\n                        <FormGroup>\r\n                            <FormControlLabel\r\n                            control={<Switch disabled checked={settings.todo.manual} onChange={handleTodo} color=\"primary\" name=\"manual\" />}\r\n                            label=\"Anotação Manual\"\r\n                            />\r\n                            {settings.todo.manual?\r\n                                <>\r\n                                    <Slider value={settings.range} onChange={handleRange} aria-labelledby=\"range-slider\"\r\n                                        step={1}\r\n                                        min={0}\r\n                                        max={settings.data.dialogs.length-1}\r\n                                        valueLabelFormat={(value) => {return value}}\r\n                                        valueLabelDisplay=\"auto\"\r\n                                    />\r\n                                    <Typography variant=\"caption\">\r\n                                        Você anotará <b>{Math.floor(settings.range[1]-settings.range[0])+1}</b> dialogos (ID{settings.data.dialogs[settings.range[0]]?settings.data.dialogs[settings.range[0]].id:0} - ID{settings.data.dialogs[settings.range[1]]?settings.data.dialogs[settings.range[1]].id:0})\r\n                                    </Typography>\r\n                                </>\r\n                            :null}\r\n                            <FormControlLabel\r\n                            control={<Switch disabled checked={settings.todo.verification} onChange={handleTodo} color=\"primary\" name=\"verification\" />}\r\n                            label=\"Active Learning\"\r\n                            />\r\n                            <FormControlLabel\r\n                            control={<Switch disabled checked={settings.todo.download} onChange={handleTodo} color=\"primary\" name=\"download\" />}\r\n                            label=\"Donwload do Dataset\"\r\n                            />\r\n                        </FormGroup>\r\n                        {!settings.todo.manual && !settings.todo.verification?\r\n                        <Typography variant=\"caption\">\r\n                            A IA pré-treinada fará <b>toda a anotação</b> para você\r\n                        </Typography>\r\n                        :settings.todo.manual && !settings.todo.verification?\r\n                        <Typography variant=\"caption\">\r\n                            Você irá anotar algumas <b>intenções e entidades</b> para a IA.\r\n                        </Typography>\r\n                        :settings.todo.manual && settings.todo.verification?\r\n                        <Typography variant=\"caption\">\r\n                            Você irá anotar <b>intenções, entidades,</b> e ainda ajudar a <b>verificar</b> as que a IA anotou.\r\n                        </Typography>\r\n                        :\r\n                        <Typography variant=\"caption\">\r\n                            Você irá <b>conferir e arrumar</b> as anotações feitas pela IA.\r\n                        </Typography>\r\n                        }\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setSettings({...settings, data: {dialogs: []}, open: false})} color=\"primary\">\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button onClick={() => handleConfirm()} color=\"primary\">\r\n                        Confirmar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </main>\r\n    )\r\n}\r\n","import Grid from '@material-ui/core/Grid';\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nexport default function ErrorPage(props) {\r\n    return(\r\n        <Grid item container direction=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Typography style={{paddingTop:'13rem',paddingBottom:'2rem'}}>\r\n                Olá, se você está vendo essa página, há algum problema na navegação dos passos. Por favor informe os administradores sobre o problema.\r\n            </Typography>\r\n        </Grid>\r\n    )\r\n}","import Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport Container from '@material-ui/core/Container';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport React from 'react';\r\nimport { MuiThemeProvider, createTheme } from \"@material-ui/core/styles\";\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport Footer from './Common/Footer.js';\r\nimport TitleToolbar from './Common/TitleToolbar.js';\r\nimport Forms from './Common/Forms.js';\r\nimport AnnotationPage from './Pages/AnnotationPage.js';\r\nimport LearningPage from './Pages/LearningPage.js';\r\nimport DownloadPage from './Pages/DownloadPage.js';\r\nimport UploadPage from './Pages/UploadPage.js';\r\nimport ErrorPage from './Pages/ErrorPage.js';\r\n\r\n\r\nconst lighttheme = createTheme({\r\n    palette: {\r\n        type: \"light\",\r\n        main: '#123'\r\n    }\r\n});\r\nconst darktheme = createTheme({\r\n    palette: {\r\n        type: \"dark\",\r\n    }\r\n});\r\n\r\nexport default function Page() {\r\n    const [info, setInfo] = React.useState({\r\n      filename: '',\r\n      step: -1,\r\n      selected: -1,\r\n      data: {},\r\n      meta: [],\r\n      intention: -1,\r\n      intentions: [],\r\n      count: {active: 0, finished: 0, deleted: 0},\r\n      entity: -1,\r\n      topic: -1,\r\n      topics: [],\r\n      drawer: false,\r\n      toolsetOpen: false,\r\n      toolsetSelected: 0,\r\n      edit: -1,\r\n      entities: [],\r\n      learning: -1,\r\n      dataLearning: {},\r\n      metaLearning: [],\r\n      forms: true,\r\n      theme: useMediaQuery('(prefers-color-scheme: dark)')?'dark':'light',\r\n      color:'red',\r\n    });\r\n    function handleStep(nstep){\r\n      setInfo({...info, step: nstep});\r\n    }\r\n    \r\n    const sendInfo = {info, setInfo}\r\n    return (\r\n        <MuiThemeProvider theme={info.theme === 'light' ? lighttheme : darktheme}>\r\n            {console.log(info)}\r\n            <CssBaseline />\r\n            <div style={{minHeight:'97vh'}}>\r\n                <Container maxWidth=\"lg\">\r\n                    <TitleToolbar {...sendInfo}/>\r\n                </Container>\r\n                <div style={{paddingRight:'1rem',paddingLeft:'3rem'}}>\r\n                    {0 <= info.step && info.step <= 3? \r\n                        <main>\r\n                            <Grid container xs={12} direction=\"column\" justifyContent=\"flex-start\" alignItems=\"center\">\r\n                                <Grid item xs={6}>\r\n                                    <Stepper activeStep={info.step} alternativeLabel style={{ backgroundColor: \"transparent\" }}>\r\n                                        <Step key={0}>\r\n                                            <StepLabel>Anotador</StepLabel>\r\n                                        </Step>\r\n                                        <Step key={1}>\r\n                                            <StepLabel>Baixar</StepLabel>\r\n                                        </Step>\r\n                                    </Stepper>\r\n                                </Grid>\r\n                                <Grid item xs={12}>\r\n                                    <ButtonGroup variant=\"contained\" color=\"primary\" aria-label=\"contained primary button group\">\r\n                                        <Button onClick={() => {handleStep(info.step-1)}}>Voltar</Button>\r\n                                        <Button disabled={info.step>=2} onClick={() => {handleStep(info.step+1)}}>Avançar</Button>\r\n                                    </ButtonGroup>\r\n                                </Grid>\r\n                                {info.step === 0?\r\n                                    <AnnotationPage {...sendInfo}/>\r\n                                :info.step === 1?\r\n                                    <DownloadPage {...sendInfo}/>\r\n                                :\r\n                                    <ErrorPage />\r\n                                }\r\n                            </Grid>\r\n                        </main>\r\n                    :\r\n                        <UploadPage {...sendInfo} />\r\n                    }\r\n                </div>\r\n            </div>\r\n            <Footer />\r\n        </MuiThemeProvider>\r\n\t);\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Page from './Components/Page.js'\n\nReactDOM.render(<Page />,document.getElementById('root'));\n"],"sourceRoot":""}